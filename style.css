:root{
  --green:#4CAF50;
  --blue:#2196F3;
  --yellow:#FFB300;
  --bg:#f6fbf6;
  --text:#1c1f23;
  --muted:#6b7280;
  --card:#ffffff;
  --success:#22c55e;
  --error:#ef4444;
}

[data-theme="dark"]{
  --bg:#0f1415;
  --text:#e5e7eb;
  --card:#141a1b;
  --muted:#9ca3af;
}

*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  font-family:"Noto Sans TC", system-ui, -apple-system, Segoe UI, Roboto, Arial, "Microsoft JhengHei", sans-serif;
  background:var(--bg);
  color:var(--text);
}

.container{width:min(1100px,92%);margin:0 auto}

/* Header */
.tmq-header{position:sticky;top:0;background:var(--card);z-index:20;border-bottom:1px solid rgba(0,0,0,.05)}
.nav-container{display:flex;align-items:center;justify-content:space-between;padding:12px 0}
.brand{display:flex;gap:10px;align-items:center;font-weight:800;color:var(--green)}
.brand i{color:var(--green)}
.nav{display:flex;gap:8px;flex-wrap:wrap}
.nav-link{border:none;background:transparent;color:var(--text);padding:10px 12px;border-radius:10px;cursor:pointer;transition:.2s}
.nav-link:hover{background:rgba(33,150,243,.1)}
.nav-link.active{background:var(--blue);color:#fff}

/* Buttons */
.btn{border:none;border-radius:12px;padding:12px 16px;font-weight:700;cursor:pointer;transition:transform .08s ease, box-shadow .2s}
.btn:active{transform:translateY(1px)}
.btn-primary{background:linear-gradient(135deg,var(--green),#2fb75e);color:#fff;box-shadow:0 8px 20px rgba(76,175,80,.25)}
.btn-ghost{background:transparent;border:1px solid rgba(0,0,0,.12);color:var(--text)}

/* Hero */
.hero{display:grid;grid-template-columns:1.1fr .9fr;gap:24px;align-items:center;padding:28px 0 16px}
.hero h1{font-size:42px;margin:0 0 8px}
.hero p{margin:0 0 18px;color:var(--muted)}
.demo-card{background:var(--card);border-radius:16px;padding:24px;box-shadow:0 10px 30px rgba(0,0,0,.08)}
.demo-typing{height:160px;border-radius:12px;border:1px dashed rgba(0,0,0,.12);display:flex;align-items:center;justify-content:center;color:var(--muted);position:relative}
.caret{width:2px;height:24px;background:var(--blue);position:absolute;left:24px;top:50%;transform:translateY(-50%);animation:blink 1s step-end infinite}
@keyframes blink{50%{opacity:0}}

.progress-overview{display:grid;gap:8px}
.level-badge{display:inline-flex;align-items:center;gap:8px;background:rgba(76,175,80,.12);padding:8px 12px;border-radius:999px;color:var(--green);font-weight:800;width:max-content}
.xp-bar{height:10px;background:#e5f3ff;border-radius:999px;overflow:hidden}
.xp-fill{height:100%;background:linear-gradient(90deg,var(--blue),#5bb8ff)}
.xp-stats{font-size:14px;color:var(--muted)}

/* Practice */
.practice{display:grid;gap:16px;padding:8px 0}
.practice-header{display:flex;justify-content:space-between;align-items:center;gap:12px}
.metrics{display:flex;gap:12px;flex-wrap:wrap}
.metric{display:flex;align-items:center;gap:10px;background:var(--card);padding:10px 14px;border-radius:12px;box-shadow:0 6px 18px rgba(0,0,0,.06)}
.metric i{color:var(--blue)}
.metric-label{font-size:12px;color:var(--muted)}
.metric-value{font-weight:900}
.level-requirements{color:var(--muted);font-size:14px}

.practice-body{display:grid;grid-template-columns:320px 1fr;gap:16px}
.passage-list{background:var(--card);border-radius:16px;padding:14px;box-shadow:0 10px 26px rgba(0,0,0,.06);height:520px;overflow:auto}
.passage-list-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:8px}
.passage-list h3{margin:0}
.passage-list ul{list-style:none;margin:0;padding:0;display:grid;gap:8px}
.passage-item{padding:10px;border-radius:12px;border:1px solid rgba(0,0,0,.06);cursor:pointer;transition:.2s;background:#fff0}
.passage-item:hover{background:rgba(33,150,243,.08)}
.passage-item.active{background:rgba(76,175,80,.12);border-color:rgba(76,175,80,.3)}

.typing-area{display:grid;gap:10px}
.target-box{background:var(--card);border-radius:16px;padding:16px;box-shadow:0 10px 26px rgba(0,0,0,.06);height:360px;overflow:auto;line-height:1.9}
.target-box .correct{color:var(--success)}
.target-box .wrong{color:var(--error);text-decoration:underline wavy rgba(239,68,68,.35)}
.progress-bar{height:10px;background:#e8f5e9;border-radius:999px;overflow:hidden}
.progress-fill{height:100%;background:linear-gradient(90deg,var(--green),#7ee08f)}
.typing-input{border:none;background:var(--card);height:48px;border-radius:10px;box-shadow:0 6px 18px rgba(0,0,0,.06);padding:0 12px;font-size:16px;outline:none}
.typing-input:focus{box-shadow:0 0 0 3px rgba(33,150,243,.2)}
.typing-hint{font-size:12px;color:var(--muted)}
/* 需求：輸入框不顯示游標閃爍 */
.typing-input{caret-color:transparent}

/* Modal */
.modal[hidden]{display:none}
.modal{position:fixed;inset:0;display:grid;place-items:center;z-index:60}
.modal-backdrop{position:absolute;inset:0;background:rgba(0,0,0,.35);backdrop-filter:blur(2px)}
.modal-card{position:relative;z-index:1;background:var(--card);color:var(--text);border-radius:16px;box-shadow:0 18px 40px rgba(0,0,0,.25);width:min(560px,92%);padding:16px;animation:fade .2s ease}
.modal-card h3{margin:4px 0 8px}
.modal-content{color:var(--muted)}
.modal-actions{margin-top:12px;display:flex;justify-content:flex-end;gap:8px}

.confetti{position:fixed;inset:0;pointer-events:none}

/* Levels */
.levels h2{margin-top:12px}
.level-card{background:var(--card);border-radius:16px;padding:14px;box-shadow:0 10px 26px rgba(0,0,0,.06)}
.level-bar{height:14px;background:#e8f5e9;border-radius:999px;overflow:hidden;margin-top:8px}
.level-fill{height:100%;background:linear-gradient(90deg,var(--green),#7ee08f)}

/* Rewards */
.rewards-header{display:flex;justify-content:space-between;align-items:center}
.rewards-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(160px,1fr));gap:12px;margin-top:12px}
.reward-card{background:var(--card);border-radius:16px;padding:14px;box-shadow:0 10px 26px rgba(0,0,0,.06);display:grid;gap:8px;transition:transform .15s}
.reward-card:hover{transform:translateY(-2px)}
.reward-name{font-weight:800}
.reward-type{font-size:12px;color:var(--muted)}
.text-link{color:var(--blue);text-decoration:none}

/* Settings */
.setting-item{display:flex;align-items:center;gap:10px;background:var(--card);padding:12px;border-radius:12px;margin:8px 0}
.switch{position:relative;display:inline-block;width:48px;height:28px}
.switch input{opacity:0;width:0;height:0}
.slider{position:absolute;cursor:pointer;inset:0;background:#cbd5e1;border-radius:999px;transition:.2s}
.slider:before{content:"";position:absolute;height:22px;width:22px;left:3px;top:3px;background:#fff;border-radius:50%;transition:.2s}
.switch input:checked + .slider{background:var(--blue)}
.switch input:checked + .slider:before{transform:translateX(20px)}
.setting-label{font-weight:700}

/* Footer */
.tmq-footer{margin-top:28px;padding:18px 0;border-top:1px solid rgba(0,0,0,.06);color:var(--muted)}
.tmq-footer .container{display:flex;justify-content:space-between;align-items:center}
.footer-links a{color:var(--muted);text-decoration:none;margin-left:12px}

.commit-strip{padding:10px 0 18px;display:grid;gap:6px}
.commit-title{font-weight:800;color:var(--text)}
.commit-list{display:flex;gap:8px;flex-wrap:wrap}
.commit-chip, #versionText{background:var(--card);border:1px solid rgba(0,0,0,.08);color:var(--text);border-radius:999px;padding:6px 10px;font-size:12px}

/* Views */
.view{display:none;animation:fade .25s ease}
.view.active{display:block}
@keyframes fade{from{opacity:0;transform:translateY(4px)}to{opacity:1;transform:translateY(0)}}

/* RWD */
@media (max-width: 900px){
  .hero{grid-template-columns:1fr}
}
@media (max-width: 820px){
  .practice-body{grid-template-columns:1fr}
  .passage-list{height:260px}
}


